<template>
<div class="common-layout" style="background-color: #f2f5f5;">
    <el-container>
      <!-- 侧边栏 -->
      <el-aside  class="side">
        <div>
            <img src="../image/class.jpg" alt="" class="photo">
            <div style="text-align: center;color: black; margin-bottom: 30px;font-size: 20px;"> {{ name }}</div>
        </div>
<div> 
    <router-link  :to="{ name: 'Chapter' }" :class="title==='Chapter'?'link active':'link'" @click="title='Chapter'">
  <el-icon :size="20"><MessageBox /></el-icon>
 <span style="margin-left: 10px;">章节</span>
 </router-link>
  <router-link :to="{ name: 'Task' }" @click="title='Task'" :class="title==='Task'?'link active':'link'" >
    <el-icon :size="20"><Menu /></el-icon>
     <span style="margin-left: 10px;">任务</span>
  </router-link>
 <router-link :to="{ name: 'Data' }" :class="title==='Data'?'link active':'link'" @click="title='Data'">
  <el-icon :size="20"><FolderOpened /></el-icon>
   <span style="margin-left: 10px;">资料</span>
 </router-link>
  <router-link :to="{ name: 'courseMessage' }" :class="title==='courseMessage'?'link active':'link'" @click="title='courseMessage'">
  <el-icon :size="20"><MessageBox/></el-icon>
   <span style="margin-left: 10px;">通知</span>
 </router-link>
   <router-link :to="{ name: 'student' }" :class="title==='student'?'link active':'link'" @click="title='student'">
 <el-icon :size="20"><User /></el-icon>
   <span style="margin-left: 10px;">学生详情</span>
 </router-link>
 <router-link :to="{ name: 'Aichat' }" :class="title==='Aichat'?'link active':'link'" @click="title='Aichat'">
  <svg  t="1752932570976" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11411" fill="currentColor" width="20" height="20"><path d="M857.6 123.733333c0 12.8-8.533333 21.333333-21.333333 21.333334-8.533333 0-21.333333-8.533333-21.333334-17.066667v-8.533333c0-12.8 8.533333-21.333333 21.333334-21.333334 8.533333 0 21.333333 8.533333 21.333333 17.066667v8.533333zM1011.2 725.333333c-8.533333-29.866667-38.4-55.466667-72.533333-55.466666h-25.6v-17.066667c-21.333333-106.666667-123.733333-187.733333-238.933334-187.733333H384V392.533333h4.266667c25.6-8.533333 46.933333-34.133333 46.933333-64 0-38.4-34.133333-68.266667-72.533333-68.266666-38.4 0-72.533333 29.866667-72.533334 68.266666v17.066667c4.266667 21.333333 21.333333 42.666667 46.933334 51.2H341.333333v68.266667h-17.066666c-110.933333 8.533333-200.533333 89.6-217.6 196.266666v4.266667h-42.666667c-34.133333 8.533333-64 38.4-64 72.533333V921.6c8.533333 29.866667 38.4 55.466667 72.533333 55.466667h25.6v8.533333c0 12.8 4.266667 25.6 8.533334 34.133333l8.533333 4.266667h34.133333l4.266667-8.533333-4.266667-12.8c-4.266667-17.066667-8.533333-38.4-8.533333-55.466667v-256c4.266667-102.4 93.866667-183.466667 200.533333-183.466667h341.333334c106.666667 4.266667 187.733333 89.6 187.733333 192v260.266667c0 17.066667-4.266667 38.4-12.8 55.466667l4.266667 8.533333h34.133333l4.266667-4.266667 4.266666-12.8 4.266667-12.8 4.266667-12.8v-8.533333h34.133333c38.4-4.266667 64-34.133333 64-68.266667V725.333333zM98.133333 934.4h-29.866666c-12.8-4.266667-25.6-12.8-25.6-25.6v-174.933333c4.266667-12.8 17.066667-17.066667 29.866666-17.066667h25.6v217.6zM358.4 354.133333c-17.066667 0-29.866667-12.8-29.866667-25.6s12.8-25.6 29.866667-25.6c17.066667 0 25.6 12.8 25.6 25.6s-8.533333 25.6-25.6 25.6z m610.133333 554.666667v4.266667c-4.266667 12.8-12.8 21.333333-29.866666 21.333333h-25.6v-226.133333h29.866666c12.8 4.266667 25.6 12.8 25.6 29.866666v170.666667z"  p-id="11412" fill="currentColor"></path><path d="M375.466667 746.666667c-29.866667 0-51.2 21.333333-51.2 51.2s25.6 51.2 51.2 51.2c29.866667 0 51.2-21.333333 51.2-51.2 0-25.6-25.6-51.2-51.2-51.2zM635.733333 746.666667c-29.866667 0-51.2 21.333333-51.2 51.2s25.6 51.2 51.2 51.2c29.866667 0 51.2-21.333333 51.2-51.2 0-25.6-21.333333-51.2-51.2-51.2zM452.266667 917.333333l-4.266667 4.266667v8.533333c0 29.866667 25.6 55.466667 55.466667 55.466667h4.266666c29.866667 0 55.466667-25.6 55.466667-55.466667v-8.533333l-4.266667-4.266667h-106.666666zM755.2 85.333333c-4.266667-8.533333-8.533333-12.8-17.066667-12.8h-21.333333c-4.266667 0-8.533333 4.266667-12.8 8.533334L652.8 213.333333v4.266667c0 8.533333 4.266667 12.8 12.8 12.8h29.866667c4.266667 0 4.266667-4.266667 4.266666-8.533333l8.533334-25.6h46.933333l8.533333 25.6v4.266666c4.266667 4.266667 4.266667 4.266667 8.533334 4.266667h25.6c8.533333 0 12.8-8.533333 8.533333-17.066667l-51.2-128z m-8.533333 85.333334h-34.133334l-4.266666-8.533334 17.066666-42.666666 4.266667-4.266667 4.266667 4.266667 17.066666 42.666666-4.266666 8.533334zM836.266667 153.6c-12.8 0-21.333333 8.533333-21.333334 21.333333v42.666667c0 8.533333 12.8 17.066667 21.333334 17.066667 12.8 0 21.333333-8.533333 21.333333-21.333334V170.666667c0-12.8-12.8-17.066667-21.333333-17.066667z"  p-id="11413" fill="currentColor"></path><path d="M1024 59.733333C1019.733333 29.866667 994.133333 4.266667 964.266667 0H588.8c-34.133333 4.266667-59.733333 29.866667-59.733333 64v183.466667c4.266667 34.133333 34.133333 59.733333 68.266666 59.733333h59.733334l8.533333 17.066667 4.266667 4.266666c8.533333 4.266667 17.066667 8.533333 25.6 8.533334 12.8 0 21.333333-4.266667 29.866666-12.8l12.8-17.066667 221.866667 4.266667h8.533333c29.866667-8.533333 55.466667-38.4 55.466667-72.533334V59.733333z m-42.666667 179.2c-4.266667 12.8-12.8 21.333333-25.6 21.333334h-238.933333c-4.266667 0-8.533333 4.266667-12.8 8.533333l-12.8 17.066667-12.8-17.066667-4.266667-4.266667c-4.266667-4.266667-8.533333-4.266667-12.8-4.266666h-68.266666c-12.8 0-21.333333-12.8-21.333334-21.333334V59.733333c0-8.533333 12.8-17.066667 25.6-17.066666h362.666667c12.8 0 21.333333 12.8 21.333333 21.333333v174.933333zM605.866667 584.533333h-213.333334c-115.2 4.266667-209.066667 98.133333-209.066666 209.066667V989.866667c0 12.8 4.266667 21.333333 8.533333 34.133333h46.933333l4.266667-8.533333-4.266667-4.266667c-8.533333-8.533333-8.533333-17.066667-8.533333-29.866667V776.533333c8.533333-68.266667 59.733333-128 132.266667-145.066666h4.266666l17.066667 34.133333 4.266667 4.266667c8.533333 17.066667 25.6 25.6 46.933333 25.6h157.866667c17.066667-4.266667 29.866667-12.8 34.133333-29.866667l17.066667-34.133333h4.266666c76.8 17.066667 132.266667 85.333333 132.266667 162.133333V989.866667c0 8.533333-8.533333 21.333333-12.8 29.866666v4.266667h38.4l4.266667-4.266667 4.266666-8.533333c4.266667-8.533333 8.533333-21.333333 8.533334-34.133333v-200.533334c-8.533333-106.666667-102.4-192-217.6-192z m-21.333334 64l-8.533333 8.533334h-145.066667c-4.266667 0-4.266667-4.266667-8.533333-4.266667l-8.533333-21.333333H597.333333l-12.8 17.066666z"  p-id="11414" fill="currentColor"></path></svg>
 <span style="margin-left: 10px;">聊天助手</span>
 </router-link>
  <router-link :to="{ name: 'examine' }" :class="title==='examine'?'link active':'link'" @click="title='examine'">
 <el-icon><EditPen :size="20" /></el-icon>
 <span style="margin-left: 10px;">答题界面</span>
 </router-link>
</div>
      </el-aside>
      <el-container>
        <el-header class="top">
          <div style="float: left;margin-top: 15px;font-size: 18px;margin-left: 570px;">
           {{name}}
          </div>
     <div style="display: flex; align-items: center; float: right; margin-top: 20px; font-size: 18px;">
     <el-icon :size="20" @click="toHome" style="cursor: pointer;"><HomeFilled /></el-icon>
    <span @click="toHome" style="margin-left: 5px;cursor: pointer;">返回首页</span>
</div>
        </el-header>
        <el-main style="background-color: white;margin-left: 50px;margin-right: 50px;margin-bottom: 20px;padding: 0;">
          <router-view></router-view>
        </el-main>
      </el-container>
    </el-container>
  </div>

</template>

<script setup>
// 组合式 API 写法（推荐）
import router from '@/router'
import { getLectureInfoByID } from '@/utils/api'
import { watch, onMounted, ref } from 'vue'
import { useRoute} from 'vue-router';
const name=ref('')
const route = useRoute();
const title=ref('')
// 定义 props（必须与路由参数名匹配）
const props = defineProps({
  courseId: {
    type: [String, Number],
    required: true
  },
  teacherId: {
    type: String,
    default: 'general'
  }
})
const toHome=()=>{
    router.push('/Home')
}

watch(
  () => route.name,
  (newPath, oldPath) => {
  title.value=newPath
  }
);
const lecture={
    courseId:props.courseId,
    teacherId:props.teacherId
}
// 组件挂载时使用参数
onMounted(() => {
  title.value=route.name
  getLectureInfoByID(lecture).then(res=>{
    console.log(res)
    name.value=res.courseName
  })
//   console.log('组件挂载:', props.courseId, props.teacherId)
//   fetchResource()
})

</script>
<style scoped>
.photo{
    width: 140px;
    height: auto;
    margin-left: 30px;
    margin-top: 60px;
    border-radius: 10px;
}
.top{
  background-color: #f2f5f5;
  height:60px;
}
.side{
  background-color: #fff;
   width: 200px;
  height:100vh;
  color: rgb(133, 132, 132);
}

.link{
    text-decoration: none;
color: rgb(108, 107, 107);
display: flex; 
align-items: center;  
margin-top: 10px; 
padding: 10px;
padding-left: 30px;
margin-right: 10px;
margin-left: 10px;
font-size: 18px;
}
.link:hover{
     background-color: #5394e3;
  border-radius: 20px;
  color: aliceblue;
}
.active{
  background-color: #5394e3;
  border-radius: 20px;
  color: aliceblue;
}
</style>